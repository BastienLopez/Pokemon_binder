[tool:pytest]
# Configuration pytest principale pour supprimer TOUS les warnings
addopts = 
    --disable-warnings
    --tb=short
    -v
    -p no:warnings
    -W ignore
    --strict-config
    --strict-markers

# Suppression exhaustive des warnings par catégorie  
filterwarnings =
    ignore
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
    ignore::FutureWarning
    ignore::RuntimeWarning
    ignore::ImportWarning
    ignore::ResourceWarning
    ignore::BytesWarning
    ignore::UnicodeWarning
    ignore::SyntaxWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::pytest.PytestCollectionWarning
    ignore::pytest.PytestConfigWarning
    ignore::pytest.PytestDeprecationWarning
    ignore::pytest.PytestRemovedTestMarkerWarning
    ignore::pytest.PytestExperimentalApiWarning
    # Starlette/FastAPI warnings spécifiques
    ignore:Please use.*python_multipart.*:PendingDeprecationWarning:starlette.*
    ignore:.*import multipart.*:PendingDeprecationWarning:starlette.*
    ignore:.*multipart.*:PendingDeprecationWarning
    # Pydantic warnings spécifiques
    ignore:Support for class-based.*config.*:DeprecationWarning:pydantic.*
    ignore:.*allow_population_by_field_name.*:UserWarning:pydantic.*
    ignore:.*populate_by_name.*:UserWarning:pydantic.*
    ignore:.*validate_by_name.*:UserWarning:pydantic.*
    ignore:.*__get_validators__.*:DeprecationWarning:pydantic.*
    ignore:.*json_encoders.*:DeprecationWarning:pydantic.*
    ignore:.*PydanticDeprecatedSince20.*:DeprecationWarning:pydantic.*
    ignore:.*ConfigDict.*:DeprecationWarning:pydantic.*
    ignore:.*get_pydantic_core_schema.*:DeprecationWarning:pydantic.*
    # Twisted warnings spécifiques
    ignore:.*twisted.internet.defer.returnValue.*:DeprecationWarning:pytest_twisted.*
    ignore:.*returnValue.*deprecated.*:DeprecationWarning:pytest_twisted.*
    ignore:.*defer.returnValue.*:DeprecationWarning
    # Autres warnings courants
    ignore:.*pkg_resources.*:DeprecationWarning
    ignore:.*imp module.*:DeprecationWarning
    ignore:.*distutils.*:DeprecationWarning
    ignore:.*asyncio.*:DeprecationWarning
    ignore:.*collections.*:DeprecationWarning

# Répertoires de tests
testpaths = tests

# Patterns de découverte des tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Mode asyncio
asyncio_mode = auto